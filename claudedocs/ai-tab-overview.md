# AI 标签页功能总览

## 功能概述

ProxyMan 的 AI 标签页功能为用户提供了专门的 AI 对话请求监控和分析能力。当代理服务器检测到 AI API 请求时，系统会自动在请求详情页面显示 "AI Chat" 标签页，允许用户以对话形式查看 AI 请求和响应内容。

## 核心特性

### 🤖 自动检测
- **智能识别**: 自动检测 OpenAI、Anthropic 等主流 AI 服务的 API 调用
- **动态显示**: 仅在检测到 AI 请求时才显示 AI Chat 标签页
- **多提供商支持**: 支持 OpenAI、Anthropic 以及其他通用 AI API 格式

### 💬 对话展示
- **统一格式**: 将不同提供商的 API 格式转换为统一的对话界面
- **角色区分**: 清晰区分用户消息、助手回复、系统提示和工具调用
- **流式支持**: 实时显示流式响应的内容更新
- **消息排序**: 按时间顺序展示完整的对话流程

### 🔧 工具调用
- **可视化展示**: 专门的组件展示 AI 助手的工具调用
- **支持多格式**: 兼容 OpenAI function calling 和 Anthropic tool use 格式
- **详细信息**: 显示工具名称、输入参数、输出结果和错误信息
- **可折叠界面**: 支持展开/折叠工具调用详情

### 📊 元数据面板
- **请求参数**: 显示模型名称、温度、最大 token 数等配置
- **使用统计**: Token 使用量统计和性能指标
- **请求标识**: 显示请求 ID、时间戳等追踪信息
- **可切换显示**: 支持显示/隐藏元数据面板

### 🎨 用户体验
- **响应式设计**: 适配不同屏幕尺寸和设备类型
- **自动滚动**: 可选的自动滚动到最新消息功能
- **主题一致性**: 与 ProxyMan 整体暗色主题保持一致
- **平滑动画**: 消息加载和展示的流畅动画效果

## 技术架构

### 组件层次结构
```
RequestDetails.vue
├── ChatViewer.vue (主对话组件)
│   ├── ToolCallViewer.vue (工具调用子组件)
│   └── aiDetector.js (检测工具)
└── 样式系统 (main.css)
```

### 数据流
```
HTTP 请求 → AI 检测 → 解析对话 → 渲染界面 → 用户交互
```

## 支持的 AI 提供商

### OpenAI
- **API 端点**: `/v1/chat/completions`, `/chat/completions`
- **特性支持**: 消息对话、function calling、流式响应
- **格式识别**: 自动解析 OpenAI API 格式的请求和响应

### Anthropic  
- **API 端点**: `/v1/messages`, `/messages`
- **特性支持**: 消息对话、tool use、系统提示、流式响应
- **格式识别**: 自动解析 Anthropic API 格式的请求和响应

### 通用 AI API
- **兼容性**: 支持其他遵循类似格式的 AI API
- **可扩展性**: 易于添加新的 AI 提供商支持



## 总结
AI 标签页功能是 ProxyMan 的重要增强功能，专门针对现代 AI 应用开发的需求设计。通过智能检测、统一展示和详细分析，它为开发者提供了强大的 AI API 监控和调试工具，显著提升了 AI 应用的开发效率和质量。


